# unbindapp/unbind-api

![GitHub License](https://img.shields.io/github/license/unbindapp/unbind-api) ![GitHub go.mod Go version](https://img.shields.io/github/go-mod/go-version/unbindapp/unbind-api)

The APIs for the Unbind platform.

## Prerequisites

- Go 1.24 or higher
- Docker Compose
- [Dex IDP](https://dexidp.io) binary installed in $PATH

## Pre-requisites

1. Clone the repository
2. Run `docker-compose up -d` to start dependencies (postgres, valkey, etc.)
3. Run `./startdex.sh` to start dex IDP
4. Reference [config/config.go](config/config.go) for environment variables, place them in a `.env` file

## Running services

- `go run cmd/api` to start the API
  - Visit `http://localhost:8089/docs` for API documentation
- `go run cmd/oauth2server` to start the OAuth2 server
- `go run cmd/cli` to execute CLI commands

## Generated code

Unbind relies on code generation for some components:

- `./ent` - Generated by ent framework
- Various interfaces, generated with [ifacemaker](https://github.com/vburenin/ifacemaker)
- `./mocks` - Generated with [mockery](https://github.com/vektra/mockery)

Run `go generate ./...` to re-generate ent code and interfaces.

Install mockery and run `mockery` to re-generate mocks.

## Core GO Dependencies

- [Huma](https://huma.rocks/) - REST API Framework
- [ent](https://entgo.io/) - Entity framework for GO
- [valkey-go](https://github.com/valkey-io/valkey-go) - Valkey client
- [ifacemaker](https://github.com/vburenin/ifacemaker) - Automatically generates interfaces from structs
- [mockery](https://github.com/vektra/mockery) - Automatically creates mocks based on `.mockery.yaml`
