// Code generated by ifacemaker; DO NOT EDIT.

package buildjob_repo

import (
	"context"
	"time"

	"github.com/google/uuid"
	"github.com/unbindapp/unbind-api/ent"
	"github.com/unbindapp/unbind-api/ent/schema"
)

// BuildJobRepositoryInterface ...
type BuildJobRepositoryInterface interface {
	Create(ctx context.Context, serviceID uuid.UUID) (*ent.BuildJob, error)
	MarkStarted(ctx context.Context, buildJobID uuid.UUID) (*ent.BuildJob, error)
	MarkFailed(ctx context.Context, buildJobID uuid.UUID, message string) (*ent.BuildJob, error)
	MarkCompleted(ctx context.Context, buildJobID uuid.UUID) (*ent.BuildJob, error)
	// Cancels all jobs that are not in a finished state
	MarkCancelled(ctx context.Context, serviceID uuid.UUID) error
	// Assigns the kubernetes "Job" name to the build job
	AssignKubernetesJobName(ctx context.Context, buildJobID uuid.UUID, jobName string) (*ent.BuildJob, error)
	SetKubernetesJobStatus(ctx context.Context, buildJobID uuid.UUID, status string) (*ent.BuildJob, error)
	GetJobsByStatus(ctx context.Context, status schema.BuildJobStatus) ([]*ent.BuildJob, error)
	GetByServiceIDPaginated(ctx context.Context, serviceID uuid.UUID, cursor *time.Time, statusFilter *schema.BuildJobStatus) (jobs []*ent.BuildJob, nextCursor *time.Time, err error)
}
